<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page1</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="page2.css">
</head>
<body>
    <h1>MULAH</h1>
    <h2>Registration</h2>
    <p><i>Please fill up your details</i></p>
    <div class="register">
        <form action="page3.html" method="post" onsubmit="return validateForm()">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" id="name" name="name" placeholder="Enter Name" required>
            </div>
            <div class="form-group">
                <label for="day">Birthday</label>
                <input type="text" id="day" name="day" placeholder="DD" required>
                <input type="text" id="month" name="month" placeholder="MM" required>
                <input type="text" id="year" name="year" placeholder="YYYY" required>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" placeholder="Email Address" required>
            </div>
            <div class="form">
                <input type="checkbox" id="no-email" name="no_email">
                <label for="no-email"><i>No email address</i></label>
            </div>
            <!-- "Continue" button -->
            <button type="button" id="button1" onclick="navigateToPage3()">Continue</button>
        </form>
    </div>    
    <footer>
        <span class="powered-by">Powered by</span>
        <span class="website-name">MulahRewards.com</span>
    </footer>

    <script>
        function validateForm() {
            const name = document.getElementById("name").value.trim();
            const day = document.getElementById("day").value.trim();
            const month = document.getElementById("month").value.trim();
            const year = document.getElementById("year").value.trim();
            const email = document.getElementById("email").value.trim();

            if (!name) {
                alert("Name cannot be empty.");
                return false;
            }

            const birthdayPattern = /^\d{2}\/\d{2}\/\d{4}$/;
            if (!day.match(/^\d{2}$/) || !month.match(/^\d{2}$/) || !year.match(/^\d{4}$/) || !birthdayPattern.test(`${day}/${month}/${year}`)) {
                alert("Invalid birthday format. Please use DD, MM, YYYY format.");
                return false;
            }

            if (!email) {
                alert("Email cannot be empty.");
                return false;
            }

            return true;
        }

        function navigateToPage3() {
            const name = document.getElementById("name").value;
            const day = document.getElementById("day").value;
            const month = document.getElementById("month").value;
            const year = document.getElementById("year").value;
            const email = document.getElementById("email").value;
            const noEmail = document.getElementById("no-email").checked;

            const phoneNumber = localStorage.getItem("phoneNumber");

            const queryParams = `name=${encodeURIComponent(name)}&day=${day}&month=${month}&year=${year}&email=${encodeURIComponent(email)}&noEmail=${noEmail}&phone=${encodeURIComponent(phoneNumber)}`;

            window.location.href = `page3.html?${queryParams}`;
        }
    </script>
</body>
</html>
